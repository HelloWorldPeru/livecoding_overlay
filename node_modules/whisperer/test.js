var Whisperer = require('./index.js')
  , client = new Whisperer({jid: 'paul.sweeney@jabber.org', password: 'eec-on-jip-ud-veav-nodd'}, ready)
  , room = 'tainthorseredux@conference.jabber.org'

client.on('error', function(err)         { console.error(err) })
client.on('message', function(message)   { console.log('message', message) })
client.on('presence', function(presence) { console.log('presence', presence) })

console.log('connecting')
client.on('online', function() { console.log('online') })

function ready() {
  console.log('connected')
  client.join({ jid: room, nick: 'other, other, other paul' })

  setTimeout(function() {
    client.message({jid: room, message: 'whattup peeps!?'})
    client.nick({jid: room, nick: 'newpaul'})
    //client.topic({jid: room, topic: 'something else'})
    //client.invite({jid: room, user: '8bitdesigner@gmail.com', message: 'Just, you know'})

    setTimeout(function() {
      client.part({jid: room, message: 'gotta run!'})
    }, 2000)
  }, 3000)
}
